<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="Gallia1.css">
	<head>
    <title>Syntactical Analysis Page 1</title>
	</head>
<body>
<h1>Analysing and Translating Greek or Latin Sentences</h1>

<p>
    <i>This page is designed to help you translate ancient Greek or Latin sentences. 
	One click on each word or group of words will open a button that will ask you to choose the syntactical function:<br> 
	subject, accusative object, dative object, genitive object, ablative, predicative, adverb, prepositional phrase, verb (active/passive), infinitive, accusative with infinitive, nominative with infinitiv, ablative absolute, or other (i.e., conjunctions, interjections, etc.).<br>
    If you were right, the answer will be displayed in green, if you were wrong, the correct answer will appear in red. 
	Once you have analysed each word in a sentence, a textbox will appear into which you can write your translation. 
	In the end, you can take a screenshot, save the webpage or print it as a pdf, so you can discuss your translations in class.</i><br>
	<br>
    If you are a teacher and want to create a page similar to this one with your own sentences, simply click on 
	<a href="https://reslatinae.github.io/create.html">this link.</a>
	</p>
	
<p>
<div class="sentence-container">
    <span class="hover-word" data-correct-answer="Subj" id="word-1">Gallia</span>
    <span class="hover-word" data-correct-answer="Verb pass" id="word-2">est</span>
    <span class="hover-word" data-correct-answer="Pred" id="word-3">omnis</span>
    <span class="hover-word" data-correct-answer="Verb pass" id="word-4">divisa</span>
    <span class="hover-word" data-correct-answer="Prep" id="word-5">in partes tres,</span>
	<span class="hover-word" data-correct-answer="Acc" id="word-6">quarum unam</span>
	<span class="hover-word" data-correct-answer="Verb act" id="word-7">incolunt</span> 
	<span class="hover-word" data-correct-answer="Subj" id="word-8">Belgae,</span>
	<span class="hover-word" data-correct-answer="Acc" id="word-9">aliam</span>
	<span class="hover-word" data-correct-answer="Subj" id="word-10">Aquitani,</span>
	<span class="hover-word" data-correct-answer="Acc" id="word-11">tertiam</span>
	<span class="hover-word" data-correct-answer="Subj" id="word-12">qui</span>
	<span class="hover-word" data-correct-answer="Abl" id="word-13">ipsorum lingua</span>
	<span class="hover-word" data-correct-answer="Pred" id="word-14">Celtae,</span>
	<span class="hover-word" data-correct-answer="Abl" id="word-15">nostra</span>
	<span class="hover-word" data-correct-answer="Pred" id="word-16">Galli</span>
	<span class="hover-word" data-correct-answer="Verb pass" id="word-17">appellantur.</span><br>
	<br>
	</div>
	<div class="sentence-container">
    <span class="hover-word" data-correct-answer="Subj" id="word-18">Hi omnes</span>
    <span class="hover-word" data-correct-answer="Abl" id="word-19">lingua, institutis, legibus</span>
    <span class="hover-word" data-correct-answer="Prep" id="word-20">inter se</span>
	<span class="hover-word" data-correct-answer="Verb act" id="word-21">differunt.</span><br>
	<br>
	</div>
	<div class="sentence-container">
	<span class="hover-word" data-correct-answer="Acc" id="word-22">Gallos</span>
    <span class="hover-word" data-correct-answer="Prep" id="word-23">ab Aquitanis</span>
    <span class="hover-word" data-correct-answer="Subj" id="word-24">Garumna flumen,</span>
    <span class="hover-word" data-correct-answer="Prep" id="word-25">a Belgis</span>
    <span class="hover-word" data-correct-answer="Subj" id="word-26">Matrona et Sequana</span>
	<span class="hover-word" data-correct-answer="Verb act" id="word-27">dividit.</span><br>
	<br>
	</div>
	<div class="sentence-container">
	<span class="hover-word" data-correct-answer="Verb act" id="word-28">Horum omnium fortissimi sunt</span>
    <span class="hover-word" data-correct-answer="Subj" id="word-29">Belgae,</span>
    <span class="hover-word" data-correct-answer="Other" id="word-30">propterea quod</span>
    <span class="hover-word" data-correct-answer="Prep" id="word-31">a cultu atque humanitate provinciae</span>
    <span class="hover-word" data-correct-answer="Adv" id="word-32">longissime</span>
	<span class="hover-word" data-correct-answer="Verb act" id="word-33">absunt.</span><br>
	<br>
	</div>
	[...]
	<div class="sentence-container">
	<span class="hover-word" data-correct-answer="Subj" id="word-34">Eorum una pars,</span>
    <span class="hover-word" data-correct-answer="AcI" id="word-35">quam Gallos obtinere</span>
    <span class="hover-word" data-correct-answer="Verb pass" id="word-36">dictum est,</span>
    <span class="hover-word" data-correct-answer="Acc" id="word-37">initium</span>
    <span class="hover-word" data-correct-answer="Verb act" id="word-38">capit</span>
	<span class="hover-word" data-correct-answer="Prep" id="word-39">a flumine Rhodano.</span><br>
	<br>
	</div>

<form id="radio-menu-form" action="your-server-endpoint" method="post">
    <div id="radio-menu-template" class="radio-menu">
        <label><input type="radio" name="word-option" value="Subj">Subject</label><br>
        <label><input type="radio" name="word-option" value="Gen">Genitive object</label><br>
        <label><input type="radio" name="word-option" value="Dat">Dative object</label><br>
        <label><input type="radio" name="word-option" value="Acc">Accusative object</label><br>
        <label><input type="radio" name="word-option" value="Abl">Ablative</label><br>
        <label><input type="radio" name="word-option" value="Pred">Predicative</label><br>
        <label><input type="radio" name="word-option" value="Adv">Adverb</label><br>
        <label><input type="radio" name="word-option" value="Prep">Prepositional phrase</label><br>
        <label><input type="radio" name="word-option" value="Verb act">Verb (active/deponent)</label><br>
		<label><input type="radio" name="word-option" value="Verb pass">Verb (passive)</label><br>
		<label><input type="radio" name="word-option" value="Inf">Infinitive</label><br>
		<label><input type="radio" name="word-option" value="AcI">Accusative with Infinitive</label><br>
        <label><input type="radio" name="word-option" value="NcI">Nominative with Infinitive</label><br>
        <label><input type="radio" name="word-option" value="Abl abs">Ablative absolute</label><br>		
		<label><input type="radio" name="word-option" value="Other">Other</label><br>
        <button type="submit" class="submit-button">Submit</button>
    </div>
</form>

<div id="translation-container" style="display:none; margin-top: 20px;">
    <label for="translation">Enter your translation:</label><br>
    <textarea id="translation" rows="1" cols="50"></textarea><br>
	<button type="button" id="submit-translation">Submit Translation</button>
</div>

<div class="background-container">
    <aside class="bottom">
        <img class="responsive-img" src="https://img.freepik.com/free-vector/broken-abandoned-ancient-greek-temple-garden_107791-27100.jpg?t=st=1723731126~exp=1723734726~hmac=ebeaea273203dccca814581b4da6c693be87d899430781fcdeab6ab42174d602&w=1380" alt="Broken abandoned ancient Greek temple in garden">
        <div class="image-credit">           
        </div>
    </aside>
</div>

<p><a href="https://reslatinae.github.io/Credentials.html">Credentials</a></p>

<script>
    const backgroundColors = {
        'Subj': '#ff8080', 
        'Gen': '#FF6347',  
        'Dat': '#8A2BE2',  
        'Acc': '#99ddff',  
        'Abl': '#ffc34d',  
        'Pred': '#ffb3b3', 
        'Adv': '#FF69B4',  
        'Prep': '#ffd9b3', 
        'Verb act': '#66cc00',  
		'Verb pass': '#4d9900',
		'Inf': '#408000',
		'AcI': '#0099e6',
		'NcI': '#ff6666',
		'Abl abs': '#cc8800',
		'Other': '#a6a6a6'
    };	
	
document.addEventListener('DOMContentLoaded', function () {
    const radioMenu = document.getElementById('radio-menu-template');
    const submitButton = radioMenu.querySelector('.submit-button');
    radioMenu.style.display = 'none';

    document.querySelectorAll('.hover-word').forEach(word => {
        word.setAttribute('data-attempts', '0');  // Initialize attempt counter
        word.addEventListener('click', function(event) {
            event.stopPropagation();
            document.querySelectorAll('.hover-word').forEach(w => w.classList.remove('active'));
		    word.classList.add('active');
			word.setAttribute('data-attempts', '0');  // Initialize attempt counter

            const radioButtons = radioMenu.querySelectorAll('input[name="word-option"]');
            radioButtons.forEach(button => button.checked = false);

            const rect = word.getBoundingClientRect();

            radioMenu.style.display = 'block';
            radioMenu.style.position = 'absolute';
            radioMenu.style.top = `${rect.bottom + window.scrollY}px`;
            radioMenu.style.left = `${rect.left + window.scrollX}px`;

            const submitButtonRect = submitButton.getBoundingClientRect();
            const viewportHeight = window.innerHeight;

            if (submitButtonRect.bottom > viewportHeight) {
                submitButton.style.position = 'fixed';
                submitButton.style.bottom = '10px';
                submitButton.style.left = '50%';
                submitButton.style.transform = 'translateX(-50%)';
                submitButton.style.zIndex = '1000';
            } else {
                submitButton.style.position = 'static';
                submitButton.style.transform = 'none';
                submitButton.style.bottom = 'auto';
                submitButton.style.left = 'auto';
            }
        });
    });

document.getElementById('radio-menu-form').addEventListener('submit', function(event) {
    event.preventDefault();

    const selectedOption = this.querySelector('input[name="word-option"]:checked').value;
    const currentWord = document.querySelector('.hover-word.active');

    if (currentWord) {
        const correctAnswer = currentWord.getAttribute('data-correct-answer');
        let functionLabel = currentWord.querySelector('.function-label');
        let attempts = parseInt(currentWord.getAttribute('data-attempts'));

        if (!functionLabel) {
            functionLabel = document.createElement('span');
            functionLabel.classList.add('function-label');
            currentWord.appendChild(functionLabel);
        }

        if (selectedOption === correctAnswer) {
            functionLabel.textContent = correctAnswer;
            functionLabel.style.color = 'green';
            currentWord.style.backgroundColor = backgroundColors[correctAnswer];
            radioMenu.style.display = 'none';
            currentWord.classList.remove('active');
        } else {
            attempts++;
            currentWord.setAttribute('data-attempts', attempts);

            if (attempts < 2) {
                alert('This is not correct. Please try again.');
            } else {
                functionLabel.textContent = correctAnswer;
                functionLabel.style.color = 'red';
                currentWord.style.backgroundColor = backgroundColors[correctAnswer];
                radioMenu.style.display = 'none';
                currentWord.classList.remove('active');
            }
        }

        const sentenceContainer = currentWord.closest('.sentence-container');
        checkIfAllOptionsSelected(sentenceContainer);  // Add this line to check after each attempt
    }
});

    document.addEventListener('click', function(event) {
        if (!radioMenu.contains(event.target) && !event.target.classList.contains('hover-word')) {
            radioMenu.style.display = 'none';
            document.querySelectorAll('.hover-word').forEach(w => w.classList.remove('active'));
        }
    });
});

function checkIfAllOptionsSelected(sentenceContainer) {
    const allWords = sentenceContainer.querySelectorAll('.hover-word');
    let allSelected = true;

    allWords.forEach(word => {
        if (!word.querySelector('.function-label')) {
            allSelected = false;
        }
    });

    if (allSelected && !sentenceContainer.querySelector('.translation-container')) {
        const translationContainer = document.createElement('div');
        translationContainer.className = 'translation-container';
        translationContainer.innerHTML = `
            <label for="translation">Enter your translation:</label><br>
            <textarea class="translation" rows="2" cols="50"></textarea><br>
        `;
        sentenceContainer.appendChild(translationContainer);
    }
}

function checkIfAllOptionsSelected(sentenceContainer) {
    const allWords = sentenceContainer.querySelectorAll('.hover-word');
    let allCorrect = true;

    allWords.forEach(word => {
        const functionLabel = word.querySelector('.function-label');
        const correctAnswer = word.getAttribute('data-correct-answer');

        if (!functionLabel || functionLabel.textContent !== correctAnswer) {
            allCorrect = false;
        }
    });

    if (allCorrect && !sentenceContainer.querySelector('.translation-container')) {
        const translationContainer = document.createElement('div');
        translationContainer.className = 'translation-container';
        translationContainer.innerHTML = `
            <label for="translation">Enter your translation:</label><br>
            <textarea class="translation" rows="2" cols="50"></textarea><br>
        `;
        sentenceContainer.appendChild(translationContainer);
    }
}
</script>
</body>
</html>
